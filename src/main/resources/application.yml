server:
  ssl:
    enabled: false
  port: 8443
  error:
    include-message: always
  reactive:
    session:
      timeout: 30d
      cookie:
        max-age: 30d
  forward-headers-strategy: framework
spring:
  kafka:
    bootstrap-servers: ${KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS}
  cloud:
    stream:
      bindings:
        handlePrompt-in-0:
          destination: prompt.events
          group: gateway
          consumer:
            # max-attempts: 3 # Example: retry configuration
            # back-off-initial-interval: 1000
            # back-off-max-interval: 10000
            # back-off-multiplier: 2.0
            concurrency: 1 # Adjust based on expected load and processing time
    function:
      definition: >
        handlePrompt;
    gateway:
      globalcors:
        cors-configurations:
          '[/**]':
            allowed-methods: GET, POST, PUT, DELETE, OPTIONS
            allowed-headers: "*"
            allow-credentials: true
            allowed-origin-patterns: "https://*.zumely.io"
        add-to-simple-url-handler-mapping: true
      routes:
        - id: zumely-gateway
          uri: http://localhost:8443
          predicates:
            - Path=/api/prompt/**
  application:
    name: zumely-gateway
#management:
#  endpoint:
#    health:
#      probes:
#        enabled: true
#  endpoints:
#    web:
#      exposure:
#        include: health
